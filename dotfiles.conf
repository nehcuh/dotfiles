# Dotfiles Configuration
# This file contains configuration for the dotfiles management system

# Platform detection
PLATFORM="unknown"
OS="$(uname -s)"

case "$OS" in
    Linux)
        if [ -f /etc/os-release ]; then
            DISTRO=$(grep -oP '(?<=^ID=).+' /etc/os-release | tr -d '"')
        elif command -v lsb_release >/dev/null 2>&1; then
            DISTRO=$(lsb_release -si | tr '[:upper:]' '[:lower:]')
        fi
        PLATFORM="linux"
        ;;
    Darwin)
        PLATFORM="macos"
        ;;
    CYGWIN*|MINGW*|MSYS*)
        PLATFORM="windows"
        ;;
esac

# Default packages for each platform
DEFAULT_PACKAGES_LINUX="system,zsh,git,tools,vim,nvim,tmux"
DEFAULT_PACKAGES_MACOS="system,zsh,git,tools,vim,nvim,tmux"
DEFAULT_PACKAGES_WINDOWS="system,windows,tools,nvim"

# Repository configuration
DOTFILES_REPO="https://github.com/nehcuh/dotfiles.git"
DOTFILES_DIR="$HOME/.dotfiles"

# Package manager configuration
PACKAGE_MANAGERS="brew,apt,pacman,dnf,scoop,winget"

# Installation options
INSTALL_DEV_TOOLS=true
INSTALL_GUI_APPS=true
INSTALL_FONTS=true
INSTALL_SHELL_FRAMEWORKS=true

# Shell configuration
DEFAULT_SHELL="zsh"
SHELL_FRAMEWORK="zinit"

# Editor configuration
DEFAULT_EDITOR="nvim"
FALLBACK_EDITOR="vim"

# Platform-specific settings
case "$PLATFORM" in
    linux)
        PACKAGE_MANAGER="apt"
        if [ "$DISTRO" = "arch" ] || [ "$DISTRO" = "manjaro" ]; then
            PACKAGE_MANAGER="pacman"
        elif [ "$DISTRO" = "fedora" ]; then
            PACKAGE_MANAGER="dnf"
        fi
        ;;
    macos)
        PACKAGE_MANAGER="brew"
        ;;
    windows)
        PACKAGE_MANAGER="scoop"
        ;;
esac

# Export variables for use in scripts
export PLATFORM
export OS
export DISTRO
export DOTFILES_REPO
export DOTFILES_DIR
export PACKAGE_MANAGER
export DEFAULT_SHELL
export DEFAULT_EDITOR
export INSTALL_DEV_TOOLS
export INSTALL_GUI_APPS
export INSTALL_FONTS
export INSTALL_SHELL_FRAMEWORKS